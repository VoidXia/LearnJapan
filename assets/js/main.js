function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function settheme(e,t){"undefined"==typeof t&&(t=!0);var i=basethemeurl+e+".min.css";$('link[title="theme"]').attr("href",i),supports_storage&&t&&(localStorage.theme=e)}function japanruby(e){function t(e,t,i){var r=void 0==i?"*":"{"+i+"}",a=new RegExp("(.[ゅょゃュョャ]?){"+t+"}((.[ゅょゃュョャ]?)"+r+")"),o=a.exec(e)[2];return o}try{if(e.indexOf("!")>=0)return e=e.replace(/!(.*?)\((.*?)\)/g,"<rt></rt>$1<rt>$2</rt>"),"<ruby>"+e+"</ruby>";if(e.indexOf("@")>=0){var i=/([\u3040-\u309f\u30a0-\u30ff]*)@((?:\d{1,2})?)/g;return e.replace(i,function(e,i,r){return void 0==r||""==r?i:0==r?t(i,0,1)+"<span class='accent0'>"+t(i,1)+"</span>":1==r?"<span class='accent'>"+t(i,0,1)+"</span>"+t(i,r):t(i,0,1)+"<span class='accent'>"+t(i,1,r-1)+"</span>"+t(i,r)})}}catch(r){console.error('error parsing "'+e+'"',r)}return e}$(document).ready(function(){function e(){1==r?(i.hide(),t.removeClass("is-open"),t.addClass("is-closed"),r=!1):(i.show(),t.removeClass("is-closed"),t.addClass("is-open"),r=!0)}document.addEventListener("keyup",function(e){27==e.keyCode&&$(".search-overlay").length&&close_search()});var t=$(".hamburger").add(".overlay"),i=$(".overlay"),r=!1;if(t.click(function(){e()}),t.click(function(){$("#wrapper").toggleClass("toggled")}),$("table").addClass("table"),$(".theme-link").click(function(e){e.preventDefault(),settheme($(this).attr("data-theme"))}),supports_storage){var a=localStorage.theme;a&&settheme(a)}else $("#theme-dropdown").hide()});var supports_storage=supports_html5_storage();!function(){for(var e=document.links,t=0,i=e.length;t<i;t++)e[t].hostname!=window.location.hostname&&(e[t].target="_blank",e[t].className+=" externalLink")}();var easyquiz=function(){function e(){var e=this;this.isLocalstorageExist()||($("#onlyremember").prop("disabled",!0),$("#wordremember").prop("disabled",!0));var t=JSON.parse(localStorage.getItem("rwords"));this.rwords=t||{},$("#wordremember").change(function(){this.checked?(t[e.quiz.rid]=!0,e.quiz.rem=!0):(delete t[e.quiz.rid],e.quiz.rem=!1),localStorage.setItem("rwords",JSON.stringify(t))}),$("#trialtext").keypress(function(t){if(13==t.which){var i=$("#autoremember").prop("checked");return e.rollquiz(1),e.displayquiz(),i&&$(this).val()==e.quiz.read&&$("#wordremember").prop("checked",!0).change(),!1}}),$("#content").on("click","a.read",function(t){t.preventDefault(),e.speak($(this).data("read"))}),$("button.toggle-next").on("click",function(t){t.preventDefault(),e.rollquiz(1),e.displayquiz()}),$("button.toggle-next-left").on("click",function(e){e.preventDefault();var t=$("#remembereddiv").detach();$("#trialdiv").before(t)}),$("button.toggle-next-right").on("click",function(e){e.preventDefault();var t=$("#trialdiv").detach();$("#remembereddiv").before(t)}),$("button.toggle-previous").on("click",function(t){t.preventDefault(),e.rollquiz(-1),e.displayquiz()})}return e.prototype.isLocalstorageExist=function(){var e="test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}},e.prototype.start=function(e){this.quizdata=e;for(var t=0;t<this.quizdata.length;t++)this.quizdata[t].rem=this.rwords[this.quizdata[t].rid];var i=$("#shufflewords").prop("checked");i&&(this.quizdata=this.quizdata.sort(function(){return.5-Math.random()})),this.quizid=-1,this.rollquiz(1),this.displayquiz()},e.prototype.displayquiz=function(){$("#content").html(this.quizid%2==0?this.quiz.tip:this.quiz.desc),$("#card-summary").html(this.quiznum+1+"/"+this.quizdata.length+"("+this.countRememberedWords()+")"),$("#wordremember").prop("checked",!!this.quiz.rem)},e.prototype.countRememberedWords=function(){for(var e=0,t=0;t<this.quizdata.length;t++)this.rwords[this.quizdata[t].rid]&&e++;return e},e.prototype.rollquiz=function(e){if(!(this.quizid+e<0||this.quizid+e>=2*this.quizdata.length)){var t=$("#onlyremember").prop("checked"),i=$("#autoreadword").prop("checked");do this.quizid+=e,this.quiznum=Math.floor(this.quizid/2),this.quiz=this.quizdata[this.quiznum];while(this.quizid>0&&this.quizid<2*this.quizdata.length-1&&t&&this.quiz.rem);this.quizid%2==0&&$("#trialtext").val(""),i&&this.quizid%2!=0&&this.speak(this.quiz.read)}},e.prototype.speak=function(e){if("speechSynthesis"in window){var t=new SpeechSynthesisUtterance(e);t.lang="ja-JP",window.speechSynthesis.speak(t)}},e}();